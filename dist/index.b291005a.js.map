{"mappings":"AAAA,IAAI,aAAa,SAAS,eAAe;AACzC,IAAI,cAAc,SAAS,eAAe;AAC1C,IAAI,uBAAuB,SAAS,eAAe;AAEnD,WAAW,iBAAiB,UAAU,OAAO;IAC3C,EAAE;IAEF,IAAI,MAAM,SAAS,eAAe,OAAO;IACzC,IAAI,WAAW,SAAS,eAAe,YAAY;IAEnD,mFAAmF;IACnF,IAAI,WAAW;IAEf,MAAM,OAAO;QACX,KAAK;QACL,UAAU;QACV,UAAU;IACZ;IAEA,IAAI,MAAM,IAAI;IACd,IAAI,KACF,QACA,qEACA;IAEF,IAAI,iBAAiB,gBAAgB;IACrC,IAAI,eAAe;IAEnB,IAAI,SAAS,SAAU,CAAC;QACtB,IAAI,IAAI,CAAC,UAAU,KAAK;YACtB,MAAM,OAAO,IAAI,KAAK;gBAAC,IAAI,CAAC;aAAS;YACrC,MAAM,MAAM,OAAO,IAAI,gBAAgB;YACvC,MAAM,IAAI,SAAS,cAAc;YACjC,EAAE,OAAO;YACT,EAAE,WAAW,WAAW,MAAM;YAC9B,SAAS,KAAK,YAAY;YAC1B,EAAE;YACF,EAAE;QACJ;QAEA,2CAA2C;QAC3C,qBAAqB,MAAM,UAAU;IACvC;IAEA,kEAAkE;IAClE,IAAI,iBAAiB,YAAY,SAAU,KAAK;QAC9C,IAAI,MAAM,kBAAkB;YAC1B,IAAI,kBAAkB,AAAC,MAAM,SAAS,MAAM,QAAS;YACrD,YAAY,QAAQ;QACtB;IACF;IAEA,mDAAmD;IACnD,qBAAqB,MAAM,UAAU;IAErC,IAAI,KAAK,KAAK,UAAU;AAC1B","sources":["ui/app.js"],"sourcesContent":["let submitForm = document.getElementById(\"submitForm\");\r\nlet progressBar = document.getElementById(\"progressBar\");\r\nlet progressBarContainer = document.getElementById(\"progressBarContainer\");\r\n\r\nsubmitForm.addEventListener(\"submit\", async (e) => {\r\n  e.preventDefault();\r\n\r\n  let url = document.getElementById(\"url\").value;\r\n  let fileName = document.getElementById(\"fileName\").value;\r\n\r\n  // Since you're not providing an option to the user, manually set fileType as 'mp3'\r\n  let fileType = \"mp3\";\r\n\r\n  const data = {\r\n    url: url,\r\n    fileName: fileName,\r\n    fileType: fileType,\r\n  };\r\n\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.open(\r\n    \"POST\",\r\n    \"https://fathomless-dusk-76665-1719385a3cfc.herokuapp.com/download\",\r\n    true\r\n  );\r\n  xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n  xhr.responseType = \"blob\";\r\n\r\n  xhr.onload = function (e) {\r\n    if (this.status == 200) {\r\n      const blob = new Blob([this.response]);\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = fileName + \".\" + fileType;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n    }\r\n\r\n    // Hide the progress bar after the download\r\n    progressBarContainer.style.display = \"none\";\r\n  };\r\n\r\n  // progress on transfers from the server to the client (downloads)\r\n  xhr.addEventListener(\"progress\", function (event) {\r\n    if (event.lengthComputable) {\r\n      var percentComplete = (event.loaded / event.total) * 100;\r\n      progressBar.value = percentComplete;\r\n    }\r\n  });\r\n\r\n  // Show the progress bar before sending the request\r\n  progressBarContainer.style.display = \"block\";\r\n\r\n  xhr.send(JSON.stringify(data));\r\n});\r\n"],"names":[],"version":3,"file":"index.b291005a.js.map","sourceRoot":"/__parcel_source_root/"}